model Room {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  coupleId   String   @unique @db.ObjectId  
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Relations
  couple     Couple? @relation("CoupleRoom", fields: [coupleId], references: [id])
  chats      Chat[]

  @@map("rooms")
}

model Chat {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  roomId     String   @db.ObjectId
  senderId   String   @db.ObjectId
  receiverId String   @db.ObjectId
  message    String
  isRead     Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Relations
  room       Room @relation(fields: [roomId], references: [id], onDelete: Cascade)
  sender     User @relation("ChatSender", fields: [senderId], references: [id])
  receiver   User @relation("ChatReceiver", fields: [receiverId], references: [id])

  @@map("chats")
}