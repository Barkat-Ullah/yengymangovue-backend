model User {
  id       String       @id @default(auto()) @map("_id") @db.ObjectId
  fullName String
  nickName String?
  email    String       @unique
  password String
  profile  String?
  role     UserRoleEnum @default(USER)
  status   UserStatus   @default(ACTIVE)

  otp         String?
  otpExpiry   DateTime?
  invite_code String?   @unique
  isConnected Boolean   @default(false)

  isEmailVerified Boolean @default(false)
  isDeleted       Boolean @default(false)

  stripeCustomerId  String?
  subscriptionStart DateTime?
  subscriptionEnd   DateTime?

  coupleId String? @unique @db.ObjectId
  couple   Couple? @relation(fields: [coupleId], references: [id], onDelete: SetNull, onUpdate: Cascade)

  payments   Payment[]
  billboards Billboard[] @relation("BillboardCreatedBy")
  events     Event[]     @relation("CreatedEvents")
  event      Event[]     @relation("ApprovedEvents")

  // Chat Relations
  sentChats     Chat[]         @relation("ChatSender")
  receivedChats Chat[]         @relation("ChatReceiver")
  //notification
  notifications Notification[] @relation("Receiver")
  notification  Notification[] @relation("Sender")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Couple {
  id         String      @id @default(auto()) @map("_id") @db.ObjectId
  users      User[]
  billboards Billboard[]

  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  events        Event[]
  subscriptions Subscription?

  room Room? @relation("CoupleRoom")

  @@map("couples")
}

enum UserRoleEnum {
  USER
  ADMIN
}

enum UserStatus {
  ACTIVE
  SUSPENDED
}
